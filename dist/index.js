parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"nbIu":[function(require,module,exports) {
var define;
var t;!function(r){if("object"==typeof exports)module.exports=r();else if("function"==typeof t&&t.amd)t(r);else{var e;try{e=window}catch(n){e=self}e.SparkMD5=r()}}(function(t){"use strict";var r=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function e(t,r){var e=t[0],n=t[1],f=t[2],i=t[3];n=((n+=((f=((f+=((i=((i+=((e=((e+=(n&f|~n&i)+r[0]-680876936|0)<<7|e>>>25)+n|0)&n|~e&f)+r[1]-389564586|0)<<12|i>>>20)+e|0)&e|~i&n)+r[2]+606105819|0)<<17|f>>>15)+i|0)&i|~f&e)+r[3]-1044525330|0)<<22|n>>>10)+f|0,n=((n+=((f=((f+=((i=((i+=((e=((e+=(n&f|~n&i)+r[4]-176418897|0)<<7|e>>>25)+n|0)&n|~e&f)+r[5]+1200080426|0)<<12|i>>>20)+e|0)&e|~i&n)+r[6]-1473231341|0)<<17|f>>>15)+i|0)&i|~f&e)+r[7]-45705983|0)<<22|n>>>10)+f|0,n=((n+=((f=((f+=((i=((i+=((e=((e+=(n&f|~n&i)+r[8]+1770035416|0)<<7|e>>>25)+n|0)&n|~e&f)+r[9]-1958414417|0)<<12|i>>>20)+e|0)&e|~i&n)+r[10]-42063|0)<<17|f>>>15)+i|0)&i|~f&e)+r[11]-1990404162|0)<<22|n>>>10)+f|0,n=((n+=((f=((f+=((i=((i+=((e=((e+=(n&f|~n&i)+r[12]+1804603682|0)<<7|e>>>25)+n|0)&n|~e&f)+r[13]-40341101|0)<<12|i>>>20)+e|0)&e|~i&n)+r[14]-1502002290|0)<<17|f>>>15)+i|0)&i|~f&e)+r[15]+1236535329|0)<<22|n>>>10)+f|0,n=((n+=((f=((f+=((i=((i+=((e=((e+=(n&i|f&~i)+r[1]-165796510|0)<<5|e>>>27)+n|0)&f|n&~f)+r[6]-1069501632|0)<<9|i>>>23)+e|0)&n|e&~n)+r[11]+643717713|0)<<14|f>>>18)+i|0)&e|i&~e)+r[0]-373897302|0)<<20|n>>>12)+f|0,n=((n+=((f=((f+=((i=((i+=((e=((e+=(n&i|f&~i)+r[5]-701558691|0)<<5|e>>>27)+n|0)&f|n&~f)+r[10]+38016083|0)<<9|i>>>23)+e|0)&n|e&~n)+r[15]-660478335|0)<<14|f>>>18)+i|0)&e|i&~e)+r[4]-405537848|0)<<20|n>>>12)+f|0,n=((n+=((f=((f+=((i=((i+=((e=((e+=(n&i|f&~i)+r[9]+568446438|0)<<5|e>>>27)+n|0)&f|n&~f)+r[14]-1019803690|0)<<9|i>>>23)+e|0)&n|e&~n)+r[3]-187363961|0)<<14|f>>>18)+i|0)&e|i&~e)+r[8]+1163531501|0)<<20|n>>>12)+f|0,n=((n+=((f=((f+=((i=((i+=((e=((e+=(n&i|f&~i)+r[13]-1444681467|0)<<5|e>>>27)+n|0)&f|n&~f)+r[2]-51403784|0)<<9|i>>>23)+e|0)&n|e&~n)+r[7]+1735328473|0)<<14|f>>>18)+i|0)&e|i&~e)+r[12]-1926607734|0)<<20|n>>>12)+f|0,n=((n+=((f=((f+=((i=((i+=((e=((e+=(n^f^i)+r[5]-378558|0)<<4|e>>>28)+n|0)^n^f)+r[8]-2022574463|0)<<11|i>>>21)+e|0)^e^n)+r[11]+1839030562|0)<<16|f>>>16)+i|0)^i^e)+r[14]-35309556|0)<<23|n>>>9)+f|0,n=((n+=((f=((f+=((i=((i+=((e=((e+=(n^f^i)+r[1]-1530992060|0)<<4|e>>>28)+n|0)^n^f)+r[4]+1272893353|0)<<11|i>>>21)+e|0)^e^n)+r[7]-155497632|0)<<16|f>>>16)+i|0)^i^e)+r[10]-1094730640|0)<<23|n>>>9)+f|0,n=((n+=((f=((f+=((i=((i+=((e=((e+=(n^f^i)+r[13]+681279174|0)<<4|e>>>28)+n|0)^n^f)+r[0]-358537222|0)<<11|i>>>21)+e|0)^e^n)+r[3]-722521979|0)<<16|f>>>16)+i|0)^i^e)+r[6]+76029189|0)<<23|n>>>9)+f|0,n=((n+=((f=((f+=((i=((i+=((e=((e+=(n^f^i)+r[9]-640364487|0)<<4|e>>>28)+n|0)^n^f)+r[12]-421815835|0)<<11|i>>>21)+e|0)^e^n)+r[15]+530742520|0)<<16|f>>>16)+i|0)^i^e)+r[2]-995338651|0)<<23|n>>>9)+f|0,n=((n+=((i=((i+=(n^((e=((e+=(f^(n|~i))+r[0]-198630844|0)<<6|e>>>26)+n|0)|~f))+r[7]+1126891415|0)<<10|i>>>22)+e|0)^((f=((f+=(e^(i|~n))+r[14]-1416354905|0)<<15|f>>>17)+i|0)|~e))+r[5]-57434055|0)<<21|n>>>11)+f|0,n=((n+=((i=((i+=(n^((e=((e+=(f^(n|~i))+r[12]+1700485571|0)<<6|e>>>26)+n|0)|~f))+r[3]-1894986606|0)<<10|i>>>22)+e|0)^((f=((f+=(e^(i|~n))+r[10]-1051523|0)<<15|f>>>17)+i|0)|~e))+r[1]-2054922799|0)<<21|n>>>11)+f|0,n=((n+=((i=((i+=(n^((e=((e+=(f^(n|~i))+r[8]+1873313359|0)<<6|e>>>26)+n|0)|~f))+r[15]-30611744|0)<<10|i>>>22)+e|0)^((f=((f+=(e^(i|~n))+r[6]-1560198380|0)<<15|f>>>17)+i|0)|~e))+r[13]+1309151649|0)<<21|n>>>11)+f|0,n=((n+=((i=((i+=(n^((e=((e+=(f^(n|~i))+r[4]-145523070|0)<<6|e>>>26)+n|0)|~f))+r[11]-1120210379|0)<<10|i>>>22)+e|0)^((f=((f+=(e^(i|~n))+r[2]+718787259|0)<<15|f>>>17)+i|0)|~e))+r[9]-343485551|0)<<21|n>>>11)+f|0,t[0]=e+t[0]|0,t[1]=n+t[1]|0,t[2]=f+t[2]|0,t[3]=i+t[3]|0}function n(t){var r,e=[];for(r=0;r<64;r+=4)e[r>>2]=t.charCodeAt(r)+(t.charCodeAt(r+1)<<8)+(t.charCodeAt(r+2)<<16)+(t.charCodeAt(r+3)<<24);return e}function f(t){var r,e=[];for(r=0;r<64;r+=4)e[r>>2]=t[r]+(t[r+1]<<8)+(t[r+2]<<16)+(t[r+3]<<24);return e}function i(t){var r,f,i,h,o,s,a=t.length,u=[1732584193,-271733879,-1732584194,271733878];for(r=64;r<=a;r+=64)e(u,n(t.substring(r-64,r)));for(f=(t=t.substring(r-64)).length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r=0;r<f;r+=1)i[r>>2]|=t.charCodeAt(r)<<(r%4<<3);if(i[r>>2]|=128<<(r%4<<3),r>55)for(e(u,i),r=0;r<16;r+=1)i[r]=0;return h=(h=8*a).toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(h[2],16),s=parseInt(h[1],16)||0,i[14]=o,i[15]=s,e(u,i),u}function h(t){var e,n="";for(e=0;e<4;e+=1)n+=r[t>>8*e+4&15]+r[t>>8*e&15];return n}function o(t){var r;for(r=0;r<t.length;r+=1)t[r]=h(t[r]);return t.join("")}function s(t){return/[\u0080-\uFFFF]/.test(t)&&(t=unescape(encodeURIComponent(t))),t}function a(t){var r,e=[],n=t.length;for(r=0;r<n-1;r+=2)e.push(parseInt(t.substr(r,2),16));return String.fromCharCode.apply(String,e)}function u(){this.reset()}return"5d41402abc4b2a76b9719d911017c592"!==o(i("hello"))&&function(t,r){var e=(65535&t)+(65535&r);return(t>>16)+(r>>16)+(e>>16)<<16|65535&e},"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function r(t,r){return(t=0|t||0)<0?Math.max(t+r,0):Math.min(t,r)}ArrayBuffer.prototype.slice=function(e,n){var f,i,h,o,s=this.byteLength,a=r(e,s),u=s;return n!==t&&(u=r(n,s)),a>u?new ArrayBuffer(0):(f=u-a,i=new ArrayBuffer(f),h=new Uint8Array(i),o=new Uint8Array(this,a,f),h.set(o),i)}}(),u.prototype.append=function(t){return this.appendBinary(s(t)),this},u.prototype.appendBinary=function(t){this._buff+=t,this._length+=t.length;var r,f=this._buff.length;for(r=64;r<=f;r+=64)e(this._hash,n(this._buff.substring(r-64,r)));return this._buff=this._buff.substring(r-64),this},u.prototype.end=function(t){var r,e,n=this._buff,f=n.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(r=0;r<f;r+=1)i[r>>2]|=n.charCodeAt(r)<<(r%4<<3);return this._finish(i,f),e=o(this._hash),t&&(e=a(e)),this.reset(),e},u.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},u.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},u.prototype.setState=function(t){return this._buff=t.buff,this._length=t.length,this._hash=t.hash,this},u.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},u.prototype._finish=function(t,r){var n,f,i,h=r;if(t[h>>2]|=128<<(h%4<<3),h>55)for(e(this._hash,t),h=0;h<16;h+=1)t[h]=0;n=(n=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),f=parseInt(n[2],16),i=parseInt(n[1],16)||0,t[14]=f,t[15]=i,e(this._hash,t)},u.hash=function(t,r){return u.hashBinary(s(t),r)},u.hashBinary=function(t,r){var e=o(i(t));return r?a(e):e},u.ArrayBuffer=function(){this.reset()},u.ArrayBuffer.prototype.append=function(t){var r,n,i,h,o,s=(n=this._buff.buffer,i=t,h=!0,(o=new Uint8Array(n.byteLength+i.byteLength)).set(new Uint8Array(n)),o.set(new Uint8Array(i),n.byteLength),h?o:o.buffer),a=s.length;for(this._length+=t.byteLength,r=64;r<=a;r+=64)e(this._hash,f(s.subarray(r-64,r)));return this._buff=r-64<a?new Uint8Array(s.buffer.slice(r-64)):new Uint8Array(0),this},u.ArrayBuffer.prototype.end=function(t){var r,e,n=this._buff,f=n.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(r=0;r<f;r+=1)i[r>>2]|=n[r]<<(r%4<<3);return this._finish(i,f),e=o(this._hash),t&&(e=a(e)),this.reset(),e},u.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},u.ArrayBuffer.prototype.getState=function(){var t,r=u.prototype.getState.call(this);return r.buff=(t=r.buff,String.fromCharCode.apply(null,new Uint8Array(t))),r},u.ArrayBuffer.prototype.setState=function(t){return t.buff=function(t,r){var e,n=t.length,f=new ArrayBuffer(n),i=new Uint8Array(f);for(e=0;e<n;e+=1)i[e]=t.charCodeAt(e);return r?i:f}(t.buff,!0),u.prototype.setState.call(this,t)},u.ArrayBuffer.prototype.destroy=u.prototype.destroy,u.ArrayBuffer.prototype._finish=u.prototype._finish,u.ArrayBuffer.hash=function(t,r){var n=o(function(t){var r,n,i,h,o,s,a=t.length,u=[1732584193,-271733879,-1732584194,271733878];for(r=64;r<=a;r+=64)e(u,f(t.subarray(r-64,r)));for(n=(t=r-64<a?t.subarray(r-64):new Uint8Array(0)).length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r=0;r<n;r+=1)i[r>>2]|=t[r]<<(r%4<<3);if(i[r>>2]|=128<<(r%4<<3),r>55)for(e(u,i),r=0;r<16;r+=1)i[r]=0;return h=(h=8*a).toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(h[2],16),s=parseInt(h[1],16)||0,i[14]=o,i[15]=s,e(u,i),u}(new Uint8Array(t)));return r?a(n):n},u});
},{}],"xWoF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FileChecksum=void 0;var e=t(require("spark-md5"));function t(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e}var a=File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice,u=function(){function t(e){i(this,t),this.file=e,this.chunkSize=2097152,this.chunkCount=Math.ceil(this.file.size/this.chunkSize),this.chunkIndex=0}return n(t,null,[{key:"create",value:function(e,i){new t(e).create(i)}}]),n(t,[{key:"create",value:function(t){var i=this;this.callback=t,this.md5Buffer=new e.default.ArrayBuffer,this.fileReader=new FileReader,this.fileReader.addEventListener("load",function(e){return i.fileReaderDidLoad(e)}),this.fileReader.addEventListener("error",function(e){return i.fileReaderDidError(e)}),this.readNextChunk()}},{key:"fileReaderDidLoad",value:function(e){if(this.md5Buffer.append(e.target.result),!this.readNextChunk()){var t=this.md5Buffer.end(!0),i=btoa(t);this.callback(null,i)}}},{key:"fileReaderDidError",value:function(e){this.callback("Error reading ".concat(this.file.name))}},{key:"readNextChunk",value:function(){if(this.chunkIndex<this.chunkCount||0==this.chunkIndex&&0==this.chunkCount){var e=this.chunkIndex*this.chunkSize,t=Math.min(e+this.chunkSize,this.file.size),i=a.call(this.file,e,t);return this.fileReader.readAsArrayBuffer(i),this.chunkIndex++,!0}return!1}}]),t}();exports.FileChecksum=u;
},{"spark-md5":"nbIu"}],"lTk1":[function(require,module,exports) {
"use strict";function e(e){var t=r(document.head,'meta[name="'.concat(e,'"]'));if(t)return t.getAttribute("content")}function t(e,t){return"string"==typeof e&&(t=e,e=document),o(e.querySelectorAll(t))}function r(e,t){return"string"==typeof e&&(t=e,e=document),e.querySelector(t)}function n(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e.disabled,o=r.bubbles,a=r.cancelable,i=r.detail,c=document.createEvent("Event");c.initEvent(t,o||!0,a||!0),c.detail=i||{};try{e.disabled=!1,e.dispatchEvent(c)}finally{e.disabled=n}return c}function o(e){return Array.isArray(e)?e:Array.from?Array.from(e):[].slice.call(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getMetaValue=e,exports.findElements=t,exports.findElement=r,exports.dispatchEvent=n,exports.toArray=o;
},{}],"gewJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BlobRecord=void 0;var e=require("./helpers");function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function s(e,t,s){return t&&r(e.prototype,t),s&&r(e,s),e}var i=function(){function r(s,i,n,a){var o=this;t(this,r),this.file=s,this.attributes={key:a,filename:s.name,content_type:s.type||"application/octet-stream",byte_size:s.size,checksum:i},this.xhr=new XMLHttpRequest,this.xhr.open("POST",n,!0),this.xhr.responseType="json",this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.setRequestHeader("Accept","application/json"),this.xhr.setRequestHeader("X-Requested-With","XMLHttpRequest");var u=(0,e.getMetaValue)("csrf-token");null!=u&&this.xhr.setRequestHeader("X-CSRF-Token",u),this.xhr.addEventListener("load",function(e){return o.requestDidLoad(e)}),this.xhr.addEventListener("error",function(e){return o.requestDidError(e)})}return s(r,[{key:"create",value:function(e){this.callback=e,this.xhr.send(JSON.stringify({blob:this.attributes}))}},{key:"requestDidLoad",value:function(e){if(this.status>=200&&this.status<300){var t=this.response,r=t.direct_upload;delete t.direct_upload,this.attributes=t,this.directUploadData=r,this.callback(null,this.toJSON())}else this.requestDidError(e)}},{key:"requestDidError",value:function(e){this.callback('Error creating Blob for "'.concat(this.file.name,'". Status: ').concat(this.status))}},{key:"toJSON",value:function(){var e={};for(var t in this.attributes)e[t]=this.attributes[t];return e}},{key:"status",get:function(){return this.xhr.status}},{key:"response",get:function(){var e=this.xhr,t=e.responseType,r=e.response;return"json"==t?r:JSON.parse(r)}}]),r}();exports.BlobRecord=i;
},{"./helpers":"lTk1"}],"REwf":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.BlobUpload=void 0;var i=function(){function t(r){var i=this;e(this,t),this.blob=r,this.file=r.file;var n=r.directUploadData,a=n.url,s=n.headers;for(var o in this.xhr=new XMLHttpRequest,this.xhr.open("POST",a,!0),this.xhr.responseType="text",s)this.xhr.setRequestHeader(o,s[o]);this.xhr.addEventListener("load",function(e){return i.requestDidLoad(e)}),this.xhr.addEventListener("error",function(e){return i.requestDidError(e)})}return r(t,[{key:"create",value:function(e){this.callback=e;var t=new FormData;t.append("file",this.file.slice()),this.xhr.send(t)}},{key:"requestDidLoad",value:function(e){var t=this.xhr,r=t.status,i=t.response;r>=200&&r<300?this.callback(null,i):this.requestDidError(e)}},{key:"requestDidError",value:function(e){this.callback('Error storing "'.concat(this.file.name,'". Status: ').concat(this.xhr.status))}}]),t}();exports.BlobUpload=i;
},{}],"ITQG":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Key=void 0;var n=function(){function t(r,n){var i=this;e(this,t),this.file=r,this.xhr=new XMLHttpRequest,this.xhr.open("POST",n,!0),this.xhr.responseType="json",this.xhr.addEventListener("load",function(e){return i.requestDidLoad(e)}),this.xhr.addEventListener("error",function(e){return i.requestDidError(e)})}return r(t,null,[{key:"create",value:function(e,r,n){new t(e,r).create(n)}}]),r(t,[{key:"create",value:function(e){this.callback=e;var t=new FormData;t.append("file",this.file.slice()),this.xhr.send(t)}},{key:"requestDidLoad",value:function(e){var t=this.xhr,r=t.status,n=t.response;r>=200&&r<300?(console.log(n),this.callback(null,n.Hash)):this.requestDidError(e)}},{key:"requestDidError",value:function(e){this.callback('Error storing "'.concat(this.file.name,'". Status: ').concat(this.xhr.status))}}]),t}();exports.Key=n;
},{}],"K5qa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DirectUpload=void 0;var e=require("./file_checksum"),r=require("./blob_record"),t=require("./blob_upload"),i=require("./key");function l(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function n(e,r){for(var t=0;t<r.length;t++){var i=r[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,r,t){return r&&n(e.prototype,r),t&&n(e,t),e}var a=0,u=function(){function n(e,r,t,i){l(this,n),this.id=++a,this.file=e,this.url=r,this.ipfsUrl=t+"/api/v0/add?only-hash=true",this.delegate=i}return o(n,[{key:"create",value:function(l){var n=this;e.FileChecksum.create(this.file,function(e,o){e?l(e):i.Key.create(n.file,n.ipfsUrl,function(e,i){if(e)l(e);else{var a=new r.BlobRecord(n.file,o,n.url,i);c(n.delegate,"directUploadWillCreateBlobWithXHR",a.xhr),a.create(function(e){if(e)l(e);else{var r=new t.BlobUpload(a);c(n.delegate,"directUploadWillStoreFileWithXHR",r.xhr),r.create(function(e){e?l(e):l(null,a.toJSON())})}})}})})}}]),n}();function c(e,r){if(e&&"function"==typeof e[r]){for(var t=arguments.length,i=new Array(t>2?t-2:0),l=2;l<t;l++)i[l-2]=arguments[l];return e[r].apply(e,i)}}exports.DirectUpload=u;
},{"./file_checksum":"xWoF","./blob_record":"gewJ","./blob_upload":"REwf","./key":"ITQG"}],"v5rm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DirectUploadController=void 0;var e=require("./direct_upload"),t=require("./helpers");function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e}var a=function(){function r(t,n){i(this,r),this.input=t,this.file=n,this.directUpload=new e.DirectUpload(this.file,this.url,this.ipfsUrl,this),this.dispatch("initialize")}return n(r,[{key:"start",value:function(e){var t=this,i=document.createElement("input");i.type="hidden",i.name=this.input.name,this.input.insertAdjacentElement("beforebegin",i),this.dispatch("start"),this.directUpload.create(function(r,n){r?(i.parentNode.removeChild(i),t.dispatchError(r)):i.value=n.signed_id,t.dispatch("end"),e(r)})}},{key:"uploadRequestDidProgress",value:function(e){var t=e.loaded/e.total*100;t&&this.dispatch("progress",{progress:t})}},{key:"dispatch",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i.file=this.file,i.id=this.directUpload.id,(0,t.dispatchEvent)(this.input,"direct-upload:".concat(e),{detail:i})}},{key:"dispatchError",value:function(e){this.dispatch("error",{error:e}).defaultPrevented||alert(e)}},{key:"directUploadWillCreateBlobWithXHR",value:function(e){this.dispatch("before-blob-request",{xhr:e})}},{key:"directUploadWillStoreFileWithXHR",value:function(e){var t=this;this.dispatch("before-storage-request",{xhr:e}),e.upload.addEventListener("progress",function(e){return t.uploadRequestDidProgress(e)})}},{key:"url",get:function(){return this.input.getAttribute("data-direct-upload-url")}},{key:"ipfsUrl",get:function(){return this.input.getAttribute("data-ipfs-url")}}]),r}();exports.DirectUploadController=a;
},{"./direct_upload":"K5qa","./helpers":"lTk1"}],"Y7Rp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DirectUploadsController=void 0;var t=require("./direct_upload_controller"),e=require("./helpers");function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}var o="input[type=file][data-direct-upload-url]:not([disabled])",a=function(){function n(t){r(this,n),this.form=t,this.inputs=(0,e.findElements)(t,o).filter(function(t){return t.files.length})}return i(n,[{key:"start",value:function(t){var e=this,r=this.createDirectUploadControllers();this.dispatch("start"),function n(){var i=r.shift();i?i.start(function(r){r?(t(r),e.dispatch("end")):n()}):(t(),e.dispatch("end"))}()}},{key:"createDirectUploadControllers",value:function(){var r=[];return this.inputs.forEach(function(n){(0,e.toArray)(n.files).forEach(function(e){var i=new t.DirectUploadController(n,e);r.push(i)})}),r}},{key:"dispatch",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,e.dispatchEvent)(this.form,"direct-uploads:".concat(t),{detail:r})}}]),n}();exports.DirectUploadsController=a;
},{"./direct_upload_controller":"v5rm","./helpers":"lTk1"}],"Xyzj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.start=a;var e=require("./direct_uploads_controller"),t=require("./helpers"),n="data-direct-uploads-processing",i=new WeakMap,r=!1;function a(){r||(r=!0,document.addEventListener("click",o,!0),document.addEventListener("submit",s),document.addEventListener("ajax:before",u))}function o(e){var t=e.target;"INPUT"!=t.tagName&&"BUTTON"!=t.tagName||"submit"!=t.type||!t.form||i.set(t.form,t)}function s(e){d(e)}function u(e){"FORM"==e.target.tagName&&d(e)}function d(t){var i=t.target;if(i.hasAttribute(n))t.preventDefault();else{var r=new e.DirectUploadsController(i),a=r.inputs;a.length&&(t.preventDefault(),i.setAttribute(n,""),a.forEach(l),r.start(function(e){i.removeAttribute(n),e?a.forEach(f):c(i)}))}}function c(e){var n=i.get(e)||(0,t.findElement)(e,"input[type=submit], button[type=submit]");if(n){var r=n.disabled;n.disabled=!1,n.focus(),n.click(),n.disabled=r}else(n=document.createElement("input")).type="submit",n.style.display="none",e.appendChild(n),n.click(),e.removeChild(n);i.delete(e)}function l(e){e.disabled=!0}function f(e){e.disabled=!1}
},{"./direct_uploads_controller":"Y7Rp","./helpers":"lTk1"}],"Focm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"start",{enumerable:!0,get:function(){return e.start}}),Object.defineProperty(exports,"DirectUpload",{enumerable:!0,get:function(){return t.DirectUpload}});var e=require("./ujs"),t=require("./direct_upload");function r(){window.ActiveStorage&&(0,e.start)()}setTimeout(r,1);
},{"./ujs":"Xyzj","./direct_upload":"K5qa"}]},{},["Focm"], null)
//# sourceMappingURL=/index.js.map